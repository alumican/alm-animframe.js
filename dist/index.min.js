/*! alm-animframe.js 1.0.0 (c) 2022 alumican, licensed under the MIT, more information https://github.com/alumican/alm-animframe.js */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("alm")):"function"==typeof define&&define.amd?define(["exports","alm"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).alm=e.alm||{},e.alm)}(this,(function(e,t){"use strict";e.AnimFrameEventType=void 0,(e.AnimFrameEventType||(e.AnimFrameEventType={})).tick="tick";class n extends CustomEvent{constructor(e){super(e)}}class i extends EventTarget{constructor(a=0,r=.1){super(),this.updateHandler=()=>{if(this.requestId=window.requestAnimationFrame(this.updateHandler),this.targetFrameRate>0){const i=t.DateUtil.now();i-this.frameStartTime>=this.interval-this.toleranceDuration&&(this.frameStartTime=i,this.dispatchEvent(new n(e.AnimFrameEventType.tick)))}else this.dispatchEvent(new n(e.AnimFrameEventType.tick))},i.requestAnimationFrame||i.provideFunctions(),this.targetFrameRate=a,this.interval=1e3/this.targetFrameRate,this.tolerance=r,this.toleranceDuration=this.interval*this.tolerance,this.isRunning=!1}start(){this.isRunning||(this.isRunning=!0,this.frameStartTime=t.DateUtil.now(),this.requestId=window.requestAnimationFrame(this.updateHandler))}stop(){this.isRunning&&(this.isRunning=!1,window.cancelAnimationFrame(this.requestId))}getIsRunning(){return this.isRunning}getTargetFrameRate(){return this.targetFrameRate}getInterval(){return this.interval}getTolerance(){return this.tolerance}getToleranceDuration(){return this.toleranceDuration}static addEventListener(t){-1===i.listeners.indexOf(t)&&(i.ticker.addEventListener(e.AnimFrameEventType.tick,t),i.listeners.push(t),++i.listenerCount,1===i.listenerCount&&i.ticker.start())}static removeEventListener(t){const n=i.listeners.indexOf(t);-1!==n&&(i.ticker.removeEventListener(e.AnimFrameEventType.tick,t),i.listeners.splice(n,1),--i.listenerCount,0===i.listenerCount&&i.ticker.stop())}static provideFunctions(){const e={requestAnimationFrame:null,cancelAnimationFrame:null};if(window&&(e.requestAnimationFrame=window.requestAnimationFrame,e.cancelAnimationFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame,!e.requestAnimationFrame)){const t=["ms","moz","webkit","o"];for(let n=0;n<t.length;++n){const i=t[n];if(e.requestAnimationFrame=window[i+"RequestAnimationFrame"],e.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"],e.requestAnimationFrame)break}}if(!e.requestAnimationFrame){const n=1e3/60;let i=0;e.requestAnimationFrame=e=>{const a=t.DateUtil.now(),r=Math.max(1,n-(a-i)),s=a+r,o=window.setTimeout((()=>{e(s)}),r);return i=s,o},e.cancelAnimationFrame=e=>{clearTimeout(e)}}i.requestAnimationFrame=e.requestAnimationFrame,i.cancelAnimationFrame=e.cancelAnimationFrame}}i.requestAnimationFrame=null,i.cancelAnimationFrame=null,i.ticker=new i,i.listenerCount=0,i.listeners=[],e.AnimFrame=i,e.AnimFrameEvent=n,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map
